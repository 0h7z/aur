--- CPP/7zip/7zip_gcc.mak
+++ CPP/7zip/7zip_gcc.mak
@@ -10 +10 @@
-MY_ASM = asmc
+MY_ASM = uasm
@@ -78 +78 @@
-LDFLAGS = -shared -fPIC $(LDFLAGS_STATIC)
+LDFLAGS += -shared -fPIC $(LDFLAGS_STATIC)
@@ -85 +85 @@
-LDFLAGS = $(LDFLAGS_STATIC)
+LDFLAGS += $(LDFLAGS_STATIC)
@@ -141 +141 @@
-CFLAGS = $(MY_ARCH_2) $(LOCAL_FLAGS) $(CFLAGS_BASE2) $(CFLAGS_BASE) $(CC_SHARED) -o $@
+CFLAGS += $(MY_ARCH_2) $(LOCAL_FLAGS) $(CFLAGS_BASE2) $(CFLAGS_BASE) $(CC_SHARED) -o $@
@@ -182 +182 @@
-CXXFLAGS = $(MY_ARCH_2) $(LOCAL_FLAGS) $(CXXFLAGS_BASE2) $(CFLAGS_BASE) $(CXXFLAGS_EXTRA) $(CC_SHARED) -o $@ $(CXX_WARN_FLAGS)
+CXXFLAGS += $(MY_ARCH_2) $(LOCAL_FLAGS) $(CXXFLAGS_BASE2) $(CFLAGS_BASE) $(CXXFLAGS_EXTRA) $(CC_SHARED) -o $@ $(CXX_WARN_FLAGS)

--- CPP/7zip/var_gcc_x64.mak
+++ CPP/7zip/var_gcc_x64.mak
@@ -2 +2 @@
-O=b/g_$(PLATFORM)
+O=$(BUILD_DIR)
